import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

plugins {
  id "org.jetbrains.kotlin.jvm"
  id "io.mehow.laboratory"
}

tasks.withType(JavaCompile).configureEach {
  sourceCompatibility JavaConfig.name
  targetCompatibility JavaConfig.name
}

tasks.withType(KotlinCompile).configureEach {
  kotlinOptions {
    jvmTarget = JavaConfig.name
    freeCompilerArgs += [
        "-Xjvm-default=all",
    ]
  }
}

laboratory {
  packageName = "io.mehow.laboratory.sample.ci"

  feature("SampleFlag") {
    withDefaultOption("OptionA")
    withOption("OptionB")
  }
}
